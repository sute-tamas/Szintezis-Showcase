<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd
        http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet id="0001" author="tsute">

        <createTable tableName="owners">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_owners"/>
            </column>
            <column name="first_name" type="VARCHAR(255)"/>
            <column name="last_name" type="VARCHAR(255)"/>
            <column name="birth_date" type="DATE"/>
        </createTable>

        <createTable tableName="workplaces">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_workplaces"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>

        <createTable tableName="inspectors">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_inspectors"/>
            </column>
            <column name="first_name" type="VARCHAR(255)"/>
            <column name="last_name" type="VARCHAR(255)"/>
            <column name="birth_date" type="DATE"/>
            <column name="workplace_id" type="BIGINT"/>
        </createTable>
        <addForeignKeyConstraint baseColumnNames="workplace_id" baseTableName="inspectors" constraintName="FK_INS_JOIN_VEH" referencedColumnNames="id" referencedTableName="workplaces"/>

        <createTable tableName="vehicles">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_vehicles"/>
            </column>
            <column name="make" type="VARCHAR(255)"/>
            <column name="model" type="VARCHAR(255)"/>
            <column name="license_plate" type="VARCHAR(255)"/>
            <column name="owner_id" type="BIGINT"/>
        </createTable>
        <addForeignKeyConstraint baseColumnNames="owner_id" baseTableName="vehicles" constraintName="FK_VEH_JOIN_OWN" referencedColumnNames="id" referencedTableName="owners"/>

        <createTable tableName="examinations">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_examinations"/>
            </column>
            <column name="start_time" type="DATETIME"/>
            <column name="inspector_id" type="BIGINT"/>
            <column name="vehicle_id" type="BIGINT"/>
        </createTable>
        <addForeignKeyConstraint baseColumnNames="inspector_id" baseTableName="examinations" constraintName="FK_INS_JOIN" referencedColumnNames="id" referencedTableName="inspectors"/>
        <addForeignKeyConstraint baseColumnNames="vehicle_id" baseTableName="examinations" constraintName="FK_VEH_JOIN" referencedColumnNames="id" referencedTableName="vehicles"/>

    </changeSet>

</databaseChangeLog>